<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal de Trading AMED</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-dark': '#131722',
                        'bg-light': '#1e222d',
                        'border-color': '#2a2e39',
                        'text-primary': '#d1d4dc',
                        'text-secondary': '#8a91a0',
                        'accent-blue': '#FF5722',
                        'accent-green': '#26a69a',
                        'accent-red': '#ef5350',
                        'accent-yellow': '#FFD700',
                    },
                    fontFamily: {
                        montserrat: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
</head>

<body class="bg-bg-dark text-text-primary min-h-screen font-montserrat leading-relaxed">
    <div class="container mx-auto px-4 py-6 max-w-7xl">
        <!-- Header -->
        <header class="bg-bg-light rounded-xl p-6 mb-8 border border-border-color shadow-lg">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="text-center md:text-left mb-4 md:mb-0">
                    <h1 class="text-3xl font-bold text-accent-blue font-montserrat">Journal de Trading</h1>
                    <p class="text-text-secondary mt-2 font-montserrat">Enregistrez et analysez vos trades selon les
                        cycles Intraday</p>
                </div>
                <nav>
                    <a href="#" id="help-btn"
                        class="bg-accent-blue hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition flex items-center">
                        <i class="fas fa-question-circle mr-2"></i> Aide
                    </a>
                </nav>
            </div>
        </header>

        <!-- Section d'aide masquée, affichée sous le calendrier -->
        <div id="help-section" class="hidden mb-8 bg-bg-light rounded-xl border border-border-color shadow-lg p-6">
            <h2 class="text-xl font-bold text-accent-blue mb-4">Aide & Introduction</h2>
            <p class="mb-4">Bienvenue dans le Journal de Trading AMED. Cette application vous permet d’enregistrer,
                d’analyser et de suivre vos opérations de trading selon différents cycles (Intraday, Hebdomadaire,
                etc.). Utilisez le calendrier pour sélectionner une date et renseigner vos entrées de journal, vos
                trades, vos notes et bien plus encore.</p>
            <ul class="list-disc pl-6 mb-4">
                <li><strong>Calendrier</strong> : Cliquez sur un jour pour ajouter ou consulter une entrée de journal
                    pour cette date.</li>
                <li><strong>Onglets du formulaire</strong> :
                    <ul class="list-disc pl-6">
                        <li><strong>Daily</strong> : Saisissez les observations et tendances du jour.</li>
                        <li><strong>Trade</strong> : Enregistrez les détails d’un trade (actif, taille, stop loss,
                            résultat, etc.).</li>
                        <li><strong>Weekly</strong> : Analysez la tendance hebdomadaire et ajoutez des notes spécifiques
                            à la semaine.</li>
                        <li><strong>Notes</strong> : Ajoutez des pense-bêtes, tâches à faire et événements économiques
                            importants.</li>
                        <li><strong>Calculatrice</strong> : Calculez le risque, le gain potentiel et le nombre de
                            contrats selon votre capital et vos paramètres.</li>
                    </ul>
                </li>
                <li><strong>Bouton Annuler</strong> : Ferme le formulaire sans enregistrer.</li>
                <li><strong>Bouton Enregistrer</strong> : Sauvegarde l’entrée du journal (fonctionnalité à compléter).
                </li>
                <li><strong>Prévisualisation d’image</strong> : Entrez une URL d’image pour afficher un aperçu dans le
                    formulaire.</li>
            </ul>
            <p class="text-text-secondary">Pour toute question, cliquez à nouveau sur le bouton Aide pour masquer cette
                section.</p>
        </div>

        <main class="grid grid-cols-1 lg:grid-cols-6 gap-8">
            <!-- Calendrier Section -->
            <section class="lg:col-span-5 bg-bg-light p-6 rounded-xl border border-border-color shadow-lg">
                <div class="flex justify-between items-center mb-6">
                    <button id="prevMonth"
                        class="text-accent-blue hover:text-orange-300 p-2 rounded-full hover:bg-bg-dark transition">
                        <i class="fas fa-chevron-left text-xl"></i>
                    </button>
                    <h2 id="currentMonthYear" class="text-xl font-bold text-center"></h2>
                    <button id="nextMonth"
                        class="text-accent-blue hover:text-orange-300 p-2 rounded-full hover:bg-bg-dark transition">
                        <i class="fas fa-chevron-right text-xl"></i>
                    </button>
                </div>

                <div class="grid grid-cols-7 gap-1 mb-2">
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Lun</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Mar</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Mer</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Jeu</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Ven</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Sam</div>
                    <div class="text-center font-bold p-2 bg-bg-dark rounded-lg">Dim</div>
                </div>

                <div id="calendarGrid" class="grid grid-cols-7 gap-1"></div>
            </section>

            <!-- Colonne de Droite (Vide pour l'instant) -->
            <section id="right-column"
                class="lg:col-span-1 bg-bg-light p-6 rounded-xl border border-border-color shadow-lg flex flex-col justify-start">
                <div class="grid grid-rows-6 gap-0 mb-6 h-full">
                    <div class="bg-orange-600 rounded-t-lg flex items-center justify-center px-1.5 h-[1.5rem]">Semaine 1
                    </div>
                    <div class="bg-bg-dark rounded-b-lg flex items-center justify-center px-1.5">Semaine 2</div>
                    <div class="bg-bg-dark rounded-lg flex items-center justify-center px-1.5">Semaine 3</div>
                    <div class="bg-bg-dark rounded-lg flex items-center justify-center px-1.5">Semaine 4</div>
                    <div class="bg-bg-dark rounded-lg flex items-center justify-center px-1.5">Semaine 5</div>
                    <div class="bg-bg-dark rounded-lg flex items-center justify-center px-1.5 mb-6">Semaine 6</div>
                </div>
            </section>

            <!-- Formulaire Section (caché par défaut et occupant toute la largeur) -->
            <section id="form-section"
                class="hidden lg:col-span-6 bg-bg-light p-6 rounded-xl border border-border-color shadow-lg">
                <h2 class="text-xl font-bold mb-4">Nouvelle Entrée pour le <span id="entry-date"
                        class="text-accent-blue"></span></h2>

                <!-- Tabs Navigation -->
                <div class="flex flex-wrap mb-6 border-b border-border-color">
                    <button class="tab-button px-4 py-2 font-medium rounded-t-lg mr-2 bg-accent-blue text-white"
                        data-tab="daily">Daily</button>
                    <button
                        class="tab-button px-4 py-2 font-medium rounded-t-lg mr-2 bg-bg-dark hover:bg-bg-light transition"
                        data-tab="trade">Trade</button>
                    <button
                        class="tab-button px-4 py-2 font-medium rounded-t-lg mr-2 bg-bg-dark hover:bg-bg-light transition"
                        data-tab="weekly">Weekly</button>
                    <button
                        class="tab-button px-4 py-2 font-medium rounded-t-lg mr-2 bg-bg-dark hover:bg-bg-light transition"
                        data-tab="notes">Notes</button>
                    <button
                        class="tab-button px-4 py-2 font-medium rounded-t-lg bg-bg-dark hover:bg-bg-light transition"
                        data-tab="calculator">Calculatrice</button>
                </div>

                <form id="journal-form" class="space-y-6">
                    <!-- Daily Tab -->
                    <div id="daily-tab" class="tab-content block">
                        <div class="space-y-4">
                            <div>
                                <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Tendance du PDR
                                    (Previous Day Range)</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-text-secondary mb-2">PDR</label>
                                        <div class="relative w-1/2">
                                            <select
                                                class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                                <option value="bullish">Bullish</option>
                                                <option value="bearish">Bearish</option>
                                                <option value="consolidation">Consolidation</option>
                                            </select>
                                            <span
                                                class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                                <i class="fas fa-chevron-down"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-text-secondary mb-2">Capture H1 (URL)</label>
                                        <input type="url"
                                            class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                            placeholder="https://...">
                                        <div class="image-preview mt-3 hidden">
                                            <img src="" alt="Preview" class="rounded-lg max-w-full">
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <label class="block text-text-secondary mb-2">Observations</label>
                                    <textarea
                                        class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue auto-resize"
                                        placeholder="Ex: Attente d'un retour sur le FVG..."></textarea>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Cycle C1</h3>
                                    <label class="block text-text-secondary mb-2">Phase C1</label>
                                    <div class="relative w-1/2">
                                        <select
                                            class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                            <option value="accumulation">Accumulation</option>
                                            <option value="re-accumulation">Ré-Accumulation</option>
                                            <option value="distribution">Distribution</option>
                                            <option value="re-distribution">Re-Distribution</option>
                                            <option value="continuation">Continuation</option>
                                            <option value="reversal">Renversement</option>
                                        </select>
                                        <span
                                            class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                            <i class="fas fa-chevron-down"></i>
                                        </span>
                                    </div>
                                    <div class="mt-4">
                                        <label class="block text-text-secondary mb-2">Capture C1 (URL)</label>
                                        <input type="url"
                                            class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                            placeholder="https://...">
                                        <div class="image-preview mt-3 hidden">
                                            <img src="" alt="Preview" class="rounded-lg max-w-full">
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Cycle C2</h3>
                                    <label class="block text-text-secondary mb-2">Phase C2</label>
                                    <div class="relative w-1/2">
                                        <select
                                            class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                            <option value="accumulation">Accumulation</option>
                                            <option value="re-accumulation">Ré-Accumulation</option>
                                            <option value="distribution">Distribution</option>
                                            <option value="re-distribution">Re-Distribution</option>
                                            <option value="continuation">Continuation</option>
                                            <option value="reversal">Renversement</option>
                                        </select>
                                        <span
                                            class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                            <i class="fas fa-chevron-down"></i>
                                        </span>
                                    </div>
                                    <div class="mt-4">
                                        <label class="block text-text-secondary mb-2">Capture C2 (URL)</label>
                                        <input type="url"
                                            class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                            placeholder="https://...">
                                        <div class="image-preview mt-3 hidden">
                                            <img src="" alt="Preview" class="rounded-lg max-w-full">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Cycle C3 & Setup
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-text-secondary mb-2">Type de Setup</label>
                                        <div class="relative w-1/2">
                                            <select
                                                class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                                <option value="long">Long</option>
                                                <option value="short">Short</option>
                                            </select>
                                            <span
                                                class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                                <i class="fas fa-chevron-down"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-text-secondary mb-2">Manipulation</label>
                                        <div class="relative w-1/2">
                                            <select
                                                class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                                <option value="">-- Sélectionner --</option>
                                                <option value="bullish_shorts">Bullish (for Shorts)</option>
                                                <option value="bearish_longs">Bearish (for Longs)</option>
                                            </select>
                                            <span
                                                class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                                <i class="fas fa-chevron-down"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <label class="block text-text-secondary mb-2">Swing Point balayé</label>
                                    <input type="text"
                                        class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                        placeholder="Ex: PDL, PWH, Swing Low M15">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trade Tab -->
                    <div id="trade-tab" class="tab-content hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-text-secondary mb-2">Actif</label>
                                <div class="relative w-1/2">
                                    <select
                                        class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                        <option value="">- Sélectionner -</option>
                                        <option value="EUR/USD">EUR/USD</option>
                                        <option value="GBP/USD">GBP/USD</option>
                                        <option value="MNQ">MNQ</option>
                                        <option value="NQ">NQ</option>
                                        <option value="US100">US100</option>
                                    </select>
                                    <span
                                        class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                        <i class="fas fa-chevron-down"></i>
                                    </span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">$/Tick - $/Pip</label>
                                <input type="text" readonly
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 opacity-70">
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Taille de position</label>
                                <input type="number"
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                    min="0.01" step="any">
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Stop Loss</label>
                                <input type="number"
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                    step="any">
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Take Profit</label>
                                <input type="number"
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                    step="any">
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Résultat</label>
                                <div class="relative w-1/2">
                                    <select
                                        class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                        <option value="win">Gagnant</option>
                                        <option value="loss">Perdant</option>
                                        <option value="breakeven">Breakeven</option>
                                    </select>
                                    <span
                                        class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                        <i class="fas fa-chevron-down"></i>
                                    </span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">P&L</label>
                                <input type="text" readonly
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3">
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Ratio R/R (TP/SL)</label>
                                <input type="text" readonly
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-text-secondary mb-2">Revue du Trade</label>
                                <textarea
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue auto-resize"
                                    placeholder="Ai-je respecté le plan ? Leçons..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Tab -->
                    <div id="weekly-tab" class="tab-content hidden">
                        <div class="space-y-4">
                            <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Tendance du PWR
                                (Previous Week Range)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-text-secondary mb-2">PWR</label>
                                    <div class="relative w-1/2">
                                        <select
                                            class="modern-select w-full bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition">
                                            <option value="bullish">Bullish</option>
                                            <option value="bearish">Bearish</option>
                                            <option value="consolidation">Consolidation</option>
                                        </select>
                                        <span
                                            class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                            <i class="fas fa-chevron-down"></i>
                                        </span>
                                    </div>
                                    <div class="mt-4">
                                        <label class="block text-text-secondary mb-2">Semaine #</label>
                                        <input type="text" id="week-number"
                                            class="w-1/2 bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition"
                                            readonly value="">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-text-secondary mb-2">Capture H4 (URL)</label>
                                    <input type="url"
                                        class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                        placeholder="https://...">
                                    <div class="image-preview mt-3 hidden">
                                        <img src="" alt="Preview" class="rounded-lg max-w-full">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-text-secondary mb-2">Obs/Notes</label>
                                <textarea
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue auto-resize"
                                    placeholder="texte"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Tab -->
                    <div id="notes-tab" class="tab-content hidden">
                        <div class="space-y-6">
                            <div>
                                <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Notes Générales /
                                    Pense-bêtes</h3>
                                <textarea
                                    class="w-full bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue auto-resize"
                                    placeholder="Écrivez vos notes générales ici..."></textarea>
                            </div>

                            <div>
                                <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Liste de Tâches
                                    (To-Do)</h3>
                                <div class="flex gap-2 mb-4 w-full">
                                    <input type="text"
                                        class="flex-grow bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                        placeholder="Nouvelle tâche...">
                                    <div class="relative w-48">
                                        <select
                                            class="modern-select bg-bg-dark border-2 border-accent-blue text-text-primary rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue shadow-lg appearance-none transition w-full">
                                            <option value="1">⭐</option>
                                            <option value="2">⭐⭐</option>
                                            <option value="3">⭐⭐⭐</option>
                                        </select>
                                        <span
                                            class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-accent-blue">
                                            <i class="fas fa-chevron-down"></i>
                                        </span>
                                    </div>
                                    <button
                                        class="bg-accent-blue hover:bg-orange-600 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <ul id="todoList" class="space-y-2"></ul>
                            </div>

                            <div>
                                <h3 class="text-lg font-bold mb-3 border-l-4 border-accent-blue pl-2">Événements
                                    Économiques Importants</h3>
                                <div class="flex gap-2 mb-4">
                                    <input type="time"
                                        class="bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue">
                                    <input type="text"
                                        class="flex-grow bg-bg-dark border border-border-color text-text-primary rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                        placeholder="Description de l'événement...">
                                    <button
                                        class="bg-accent-blue hover:bg-orange-600 text-white w-10 h-10 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <ul id="eventList" class="space-y-2"></ul>
                            </div>
                        </div>
                    </div>

                    <!-- Calculator Tab -->
                    <div id="calculator-tab" class="tab-content hidden">
                        <div class="bg-bg-light rounded-xl border border-border-color overflow-hidden">
                            <div class="p-6">
                                <h2 class="text-lg font-semibold text-text-primary mb-4">Sélection de l'indice</h2>
                                <div class="grid grid-cols-2 gap-3 mb-6">
                                    <button
                                        class="ticker-btn py-3 px-4 rounded-lg bg-bg-dark hover:bg-border-color border border-border-color text-text-primary font-medium">
                                        <div class="flex flex-col items-center">
                                            <div class="flex items-center">
                                                <i class="fas fa-chart-line mr-2 text-accent-blue"></i>
                                                <span>NQ</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button
                                        class="ticker-btn py-3 px-4 rounded-lg bg-bg-dark hover:bg-border-color border border-border-color text-text-primary font-medium">
                                        <div class="flex flex-col items-center">
                                            <div class="flex items-center">
                                                <i class="fas fa-chart-line mr-2 text-accent-blue"></i>
                                                <span>MNQ</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button
                                        class="ticker-btn py-3 px-4 rounded-lg bg-bg-dark hover:bg-border-color border border-border-color text-text-primary font-medium">
                                        <div class="flex flex-col items-center">
                                            <div class="flex items-center">
                                                <i class="fas fa-chart-line mr-2 text-accent-blue"></i>
                                                <span>ES</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button
                                        class="ticker-btn py-3 px-4 rounded-lg bg-bg-dark hover:bg-border-color border border-border-color text-text-primary font-medium">
                                        <div class="flex flex-col items-center">
                                            <div class="flex items-center">
                                                <i class="fas fa-chart-line mr-2 text-accent-blue"></i>
                                                <span>MES</span>
                                            </div>
                                        </div>
                                    </button>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label class="block text-sm font-medium text-text-secondary mb-1">Capital
                                            ($)</label>
                                        <div class="relative">
                                            <input type="number"
                                                class="w-full p-3 border border-border-color bg-bg-dark text-text-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                                placeholder="10000">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-secondary mb-1">Risk
                                            (%)</label>
                                        <div class="relative">
                                            <input type="number"
                                                class="w-full p-3 border border-border-color bg-bg-dark text-text-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                                placeholder="1">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-secondary mb-1">Stop Loss
                                            (ticks)</label>
                                        <div class="relative">
                                            <input type="number"
                                                class="w-full p-3 border border-border-color bg-bg-dark text-text-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                                placeholder="10">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-secondary mb-1">Take Profit
                                            (ticks)</label>
                                        <div class="relative">
                                            <input type="number"
                                                class="w-full p-3 border border-border-color bg-bg-dark text-text-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-blue"
                                                placeholder="20">
                                        </div>
                                    </div>
                                </div>

                                <button
                                    class="w-full py-3 px-4 bg-accent-blue hover:bg-orange-600 text-white font-medium rounded-lg transition mb-6">
                                    <i class="fas fa-calculator mr-2"></i> Calculer
                                </button>

                                <div class="hidden" id="results">
                                    <h2 class="text-lg font-semibold text-text-primary mb-4">Résultats pour <span
                                            class="text-accent-blue">NQ</span></h2>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="result-card p-4 rounded-lg">
                                            <div class="flex items-center mb-2">
                                                <div class="bg-bg-dark p-2 rounded-full mr-3">
                                                    <i class="fas fa-balance-scale text-accent-blue"></i>
                                                </div>
                                                <span class="font-medium text-text-primary">Risk/Reward</span>
                                            </div>
                                            <div class="text-2xl font-bold text-accent-blue">1:2</div>
                                        </div>
                                        <div class="result-card p-4 rounded-lg">
                                            <div class="flex items-center mb-2">
                                                <div class="bg-bg-dark p-2 rounded-full mr-3">
                                                    <i class="fas fa-exclamation-circle text-accent-red"></i>
                                                </div>
                                                <span class="font-medium text-text-primary">Risk ($)</span>
                                            </div>
                                            <div class="text-2xl font-bold text-accent-red">$100</div>
                                        </div>
                                        <div class="result-card p-4 rounded-lg">
                                            <div class="flex items-center mb-2">
                                                <div class="bg-bg-dark p-2 rounded-full mr-3">
                                                    <i class="fas fa-chart-line text-accent-green"></i>
                                                </div>
                                                <span class="font-medium text-text-primary">Gain potentiel ($)</span>
                                            </div>
                                            <div class="text-2xl font-bold text-accent-green">$200</div>
                                        </div>
                                        <div class="result-card p-4 rounded-lg">
                                            <div class="flex items-center mb-2">
                                                <div class="bg-bg-dark p-2 rounded-full mr-3">
                                                    <i class="fas fa-boxes text-blue-400"></i>
                                                </div>
                                                <span class="font-medium text-text-primary">Contrats max</span>
                                            </div>
                                            <div class="text-2xl font-bold text-blue-400">2</div>
                                        </div>
                                    </div>
                                    <div class="mt-4 text-sm text-text-secondary">
                                        <p>NQ: $5 par tick (0.25 point) | $20 par point</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pt-6 flex justify-end gap-4">
                        <button type="button" id="cancel-btn"
                            class="bg-bg-dark hover:bg-accent-blue hover:text-white text-text-secondary font-bold py-3 px-4 rounded-lg transition">
                            Annuler
                        </button>
                        <button type="submit"
                            class="bg-gray-200 text-black hover:bg-accent-blue hover:text-white font-bold py-3 px-4 rounded-lg transition">
                            Enregistrer
                        </button>
                    </div>
                </form>
            </section>
        </main>

        <footer class="text-center text-text-secondary py-6 mt-8">
            Powered by 3drives - © 2025 - Thitix
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const calendarGrid = document.getElementById('calendarGrid');
            const currentMonthYear = document.getElementById('currentMonthYear');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const formSection = document.getElementById('form-section');
            const journalForm = document.getElementById('journal-form');
            const cancelBtn = document.getElementById('cancel-btn');
            const entryDateEl = document.getElementById('entry-date');
            const tabButtons = formSection.querySelectorAll('.tab-button');
            const helpBtn = document.getElementById('help-btn');
            const helpSection = document.getElementById('help-section');
            const weekNumberInput = document.getElementById('week-number');

            const todoInput = document.querySelector('#notes-tab input[placeholder="Nouvelle tâche..."]');
            const todoSelect = document.querySelector('#notes-tab select');
            const todoList = document.getElementById('todoList');
            const todoAddBtn = todoList.parentElement.querySelector('button');

            const eventTimeInput = document.querySelector('#notes-tab input[type="time"]');
            const eventDescInput = document.querySelector('#notes-tab input[placeholder="Description de l\'événement..."]');
            const eventList = document.getElementById('eventList');
            const eventAddBtn = eventList.parentElement.querySelector('button');

            let currentDate = new Date();
            let selectedDateForEntry = null;

            // --- CALENDAR LOGIC ---
            function renderCalendar() {
                calendarGrid.innerHTML = '';
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                currentMonthYear.textContent = new Date(year, month).toLocaleString('fr-FR', { month: 'long', year: 'numeric' });

                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const startOffset = firstDay === 0 ? 6 : firstDay - 1;

                // Previous month's days
                const prevMonthDays = new Date(year, month, 0).getDate();
                for (let i = startOffset - 1; i >= 0; i--) {
                    const day = document.createElement('div');
                    day.className = 'calendar-day text-center p-3 bg-bg-dark rounded-lg cursor-pointer opacity-50';
                    day.textContent = prevMonthDays - i;
                    calendarGrid.appendChild(day);
                }

                // Current month's days
                const today = new Date();
                for (let i = 1; i <= daysInMonth; i++) {
                    const day = document.createElement('div');
                    day.className = 'calendar-day text-center p-3 bg-bg-dark rounded-lg cursor-pointer hover:bg-bg-light transition';
                    day.textContent = i;

                    if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        day.classList.add('border-2', 'border-accent-blue');
                    }

                    day.addEventListener('click', () => {
                        selectedDateForEntry = new Date(year, month, i);
                        showEntryForm(selectedDateForEntry);
                    });
                    calendarGrid.appendChild(day);
                }

                // Next month's days
                const totalCells = 42;
                const nextMonthDays = totalCells - (startOffset + daysInMonth);
                for (let i = 1; i <= nextMonthDays; i++) {
                    const day = document.createElement('div');
                    day.className = 'calendar-day text-center p-3 bg-bg-dark rounded-lg cursor-pointer opacity-50';
                    day.textContent = i;
                    calendarGrid.appendChild(day);
                }
            }

            // --- FORM DISPLAY LOGIC ---
            function showEntryForm(date) {
                entryDateEl.textContent = date.toLocaleDateString('fr-FR', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
                formSection.classList.remove('hidden');
                formSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                updateWeekNumber(date);
            }

            function hideEntryForm() {
                formSection.classList.add('hidden');
            }

            function getWeekNumber(date) {
                // ISO week number
                const tempDate = new Date(date.getTime());
                tempDate.setHours(0, 0, 0, 0);
                tempDate.setDate(tempDate.getDate() + 4 - (tempDate.getDay() || 7));
                const yearStart = new Date(tempDate.getFullYear(), 0, 1);
                const weekNo = Math.ceil((((tempDate - yearStart) / 86400000) + 1) / 7);
                return weekNo;
            }

            function updateWeekNumber(date) {
                if (weekNumberInput) {
                    weekNumberInput.value = getWeekNumber(date);
                }
            }

            // --- EVENT LISTENERS ---

            // Calendar Navigation
            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            // Form Buttons
            journalForm.addEventListener('submit', (e) => {
                e.preventDefault();
                console.log('Formulaire soumis. Les données seraient sauvegardées ici.');
                hideEntryForm();
            });

            cancelBtn.addEventListener('click', () => {
                hideEntryForm();
            });

            // Tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');

                    // Reset all buttons to inactive state
                    tabButtons.forEach(btn => {
                        btn.classList.remove('bg-accent-blue', 'text-white');
                        btn.classList.add('bg-bg-dark', 'hover:bg-bg-light');
                    });

                    // Deactivate all content tabs
                    formSection.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('block');
                        tab.classList.add('hidden');
                    });

                    // Activate the clicked button and its content
                    button.classList.remove('bg-bg-dark', 'hover:bg-bg-light');
                    button.classList.add('bg-accent-blue', 'text-white');
                    const activeTabContent = formSection.querySelector(`#${tabId}-tab`);
                    activeTabContent.classList.remove('hidden');
                    activeTabContent.classList.add('block');
                });
            });

            // --- EVENEMENT BOUTON AIDE ---
            helpBtn.addEventListener('click', (e) => {
                e.preventDefault();
                helpSection.classList.toggle('hidden');
                helpSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });

            // Image preview for URLs
            formSection.querySelectorAll('input[type="url"]').forEach(input => {
                const preview = input.nextElementSibling;
                input.addEventListener('input', () => {
                    if (input.value && input.value.startsWith('http')) {
                        preview.querySelector('img').src = input.value;
                        preview.classList.remove('hidden');
                    } else {
                        preview.classList.add('hidden');
                    }
                });
            });

            // Auto-resize textareas
            formSection.querySelectorAll('.auto-resize').forEach(textarea => {
                textarea.addEventListener('input', function () {
                    this.style.height = 'auto';
                    this.style.height = (this.scrollHeight) + 'px';
                });
            });

            // Ajout tâche à la liste
            function addTodo() {
                const text = todoInput.value.trim();
                const stars = todoSelect.value;
                if (text) {
                    const li = document.createElement('li');
                    li.className = 'flex items-center gap-4 bg-bg-dark rounded-lg p-2 border border-border-color';
                    // Création de la case à cocher
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.className = 'form-checkbox h-5 w-5 accent-blue';
                    // Création des étoiles
                    const starsSpan = document.createElement('span');
                    starsSpan.className = 'text-lg';
                    starsSpan.textContent = '⭐'.repeat(stars);
                    // Création du texte
                    const textSpan = document.createElement('span');
                    textSpan.className = 'flex-1';
                    textSpan.textContent = text;
                    // Gestion du barré
                    checkbox.addEventListener('change', () => {
                        if (checkbox.checked) {
                            textSpan.classList.add('line-through', 'text-text-secondary');
                        } else {
                            textSpan.classList.remove('line-through', 'text-text-secondary');
                        }
                    });
                    // Ajout des éléments dans la tâche
                    li.appendChild(checkbox);
                    li.appendChild(starsSpan);
                    li.appendChild(textSpan);
                    todoList.appendChild(li);
                    todoInput.value = '';
                    todoSelect.value = '1';
                }
            }
            todoInput.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); addTodo(); } });
            todoAddBtn.addEventListener('click', addTodo);

            // Ajout événement à la liste
            function addEvent() {
                const time = eventTimeInput.value;
                const desc = eventDescInput.value.trim();
                if (time && desc) {
                    const li = document.createElement('li');
                    li.className = 'flex items-center gap-2 bg-bg-dark rounded-lg p-2 border border-border-color';
                    li.innerHTML = `<span class='font-bold text-accent-blue'>${time}</span><span>${desc}</span>`;
                    eventList.appendChild(li);
                    eventTimeInput.value = '';
                    eventDescInput.value = '';
                }
            }
            eventDescInput.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); addEvent(); } });
            eventAddBtn.addEventListener('click', addEvent);

            // --- INITIALIZATION ---
            renderCalendar();
        });
    </script>
</body>

</html>
